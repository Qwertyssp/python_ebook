<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-tw" lang="zh-tw" >
<head>
  <xbasehref="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials/189-twistedcallback--deferred" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index, follow" />
  <meta name="keywords" content="Python, ç¨‹å¼è¨­è¨ˆ, æ•™å­¸, ç¨‹å¼è¨­è¨ˆæ•™å­¸, cèªè¨€, C++, c++èªè¨€, TurboGears, Twisted" />
  <meta name="title" content="Twistedçš„Callbackæ©Ÿåˆ¶ : Deferred" />
  <meta name="author" content="Victor" />
  <meta name="description" content="Victorçš„ æ˜“è¨˜å­¸ ç¨‹å¼è¨­è¨ˆæ•™å­¸ï¼ŒåŒ…å«Pythonã€C/C++èªè¨€ã€TurboGearsç­‰æ•™å­¸ï¼Œä»¥åŠä»¥æ‰¿æ¥Pythonç‚ºä¸»çš„ç¨‹å¼è¨­è¨ˆå¤–åŒ…" />
  <meta name="generator" content="Joomla! 1.5 - Open Source Content Management" />
  <title>Twistedçš„Callbackæ©Ÿåˆ¶ : Deferred</title>
  <link href="/templates/themza_j15_11/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script type="text/javascript" src="../../../media/system/js/mootools.js" tppabs="http://ez2learn.com/media/system/js/mootools.js"></script>
  <script type="text/javascript" src="../../../media/system/js/caption.js" tppabs="http://ez2learn.com/media/system/js/caption.js"></script>
  <script type="text/javascript" language="javascript">
var J_BasePath = '/';
</script>
<link type="text/css" rel="stylesheet" href="../../../plugins/content/joomler_syntaxhighlighter/Styles/SyntaxHighlighter.css" tppabs="http://ez2learn.com/plugins/content/joomler_syntaxhighlighter//Styles/SyntaxHighlighter.css"></link>
<script type="text/javascript" language="javascript" src="../../../plugins/content/joomler_syntaxhighlighter/Scripts/shCore.js" tppabs="http://ez2learn.com/plugins/content/joomler_syntaxhighlighter/Scripts/shCore.js"></script>
<script type="text/javascript" language="javascript" src="../../../plugins/content/joomler_syntaxhighlighter/J_dpCall.js" tppabs="http://ez2learn.com/plugins/content/joomler_syntaxhighlighter/J_dpCall.js"></script>
  <script type="text/javascript" language="javascript" src="../../../plugins/content/joomler_syntaxhighlighter/Scripts/shBrushPython.js" tppabs="http://ez2learn.com/plugins/content/joomler_syntaxhighlighter/Scripts/shBrushPython.js"></script>

<link rel="stylesheet" href="../../../templates/system/css/system.css" tppabs="http://ez2learn.com/templates/system/css/system.css" type="text/css" />
<link rel="stylesheet" href="../../../templates/system/css/general.css" tppabs="http://ez2learn.com/templates/system/css/general.css" type="text/css" />
<link rel="stylesheet" href="../../../templates/themza_j15_11/css/template.css" tppabs="http://ez2learn.com/templates/themza_j15_11/css/template.css" type="text/css" />
<link rel="stylesheet" href="../../../templates/themza_j15_11/css/green.css" tppabs="http://ez2learn.com/templates/themza_j15_11/css/green.css" type="text/css" />
<!--[if lte IE 6]>
<link href="../../../templates/themza_j15_11/css/ieonly.css" tppabs="http://ez2learn.com/templates/themza_j15_11/css/ieonly.css"  rel="stylesheet" type="text/css" />
<![endif]-->
</head>
<body id="page_bg">
<a name="up" id="up"></a>
<div id="main_bg" class="main_bg_center">
	<div id="logo_bg"><img src="../../../templates/themza_j15_11/images/green/logo.png" tppabs="http://ez2learn.com/templates/themza_j15_11/images/green/logo.png" alt="logo" align="left" hspace="5" />        <a href="javascript:if(confirm('http://ez2learn.com/index.php  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php'" tppabs="http://ez2learn.com/index.php" class="logo">Victor æ˜“è¨˜å­¸ ç¨‹å¼è¨­è¨ˆæ•™å­¸</a>
        <div id="user4"><form action="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials/index.php" method="post">
	<div class="search">
		<input name="searchword" id="mod_search_searchword" maxlength="20" alt="æœå°‹" class="inputbox" type="text" size="20" value="æœå°‹..."  onblur="if(this.value=='') this.value='æœå°‹...';" onfocus="if(this.value=='æœå°‹...') this.value='';" />	</div>
	<input type="hidden" name="task"   value="search" />
	<input type="hidden" name="option" value="com_search" />
</form></div>
        <br clear="all" />
    </div>
    <div id="user3"><div id="pillmenu"><ul id="mainlevel-nav"><li><a href="javascript:if(confirm('http://ez2learn.com/index.php/home  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/home'" tppabs="http://ez2learn.com/index.php/home" class="mainlevel-nav" >é¦–é </a></li><li><a href="javascript:if(confirm('http://ez2learn.com/index.php/news  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/news'" tppabs="http://ez2learn.com/index.php/news" class="mainlevel-nav" >æœ€æ–°æ¶ˆæ¯</a></li><li><a href="javascript:if(confirm('http://ez2learn.com/index.php/faqs  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/faqs'" tppabs="http://ez2learn.com/index.php/faqs" class="mainlevel-nav" >å¸¸è¦‹å•é¡Œ</a></li><li><a href="javascript:if(confirm('http://ez2learn.com/index.php/resources  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/resources'" tppabs="http://ez2learn.com/index.php/resources" class="mainlevel-nav" >å¥½ç«™é€£çµ</a></li><li><a href="javascript:if(confirm('http://phorum.study-area.org/  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://phorum.study-area.org/'" tppabs="http://phorum.study-area.org/" class="mainlevel-nav" >é…·å­¸åœ’è¨è«–å€</a></li><li><a href="javascript:if(confirm('http://ez2learn.com/index.php/contact-us  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/contact-us'" tppabs="http://ez2learn.com/index.php/contact-us" class="mainlevel-nav" >è¯çµ¡æˆ‘å€‘</a></li></ul></div><div id="date">Thursday 11th of February 2010</div></div>
		<div id="leftcolumn">
            		<div class="module_menu">
			<div>
				<div>
					<div>
													<h3>ç¨‹å¼è¨­è¨ˆæ•™å­¸</h3>
											<ul class="menu"><li class="parent active item56"><a href="javascript:if(confirm('http://ez2learn.com/index.php/python-tutorials  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/python-tutorials'" tppabs="http://ez2learn.com/index.php/python-tutorials"><span>Pythonæ•™å­¸</span></a><ul><li class="item62"><a href="../python-basic-tutorials.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/python-basic-tutorials"><span>PythonåŸºç¤æ•™å­¸</span></a></li><li class="item63"><a href="../python-tutorials.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/python-tutorials"><span>Pythonå…¥é–€æ•™å­¸</span></a></li><li class="item64"><a href="../advance-tutorials.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/advance-tutorials"><span>Pythoné€²éšæ•™å­¸</span></a></li><li class="item65"><a href="../python-examples.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/python-examples"><span>Pythonç¨‹å¼ç¯„ä¾‹</span></a></li><li id="current" class="active item67"><a href="../twisted-tutorials.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials"><span>Twistedæ•™å­¸</span></a></li><li class="item66"><a href="../turbogears-tutorials.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/turbogears-tutorials"><span>TurboGearsæ•™å­¸</span></a></li><li class="item68"><a href="../eclipse-pydev-tutorials.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/eclipse-pydev-tutorials"><span>Eclipse çš„ Pydev IDEæ•™å­¸</span></a></li></ul></li><li class="parent item58"><a href="javascript:if(confirm('http://ez2learn.com/index.php/c-tutorials  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/c-tutorials'" tppabs="http://ez2learn.com/index.php/c-tutorials"><span>Cèªè¨€æ•™å­¸</span></a></li></ul>					</div>
				</div>
			</div>
		</div>
			<div class="module_menu">
			<div>
				<div>
					<div>
													<h3>ç›¸é—œç¶²ç«™</h3>
											<ul class="menu"><li class="item54"><a href="javascript:if(confirm('http://blog.ez2learn.com/  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://blog.ez2learn.com/'" tppabs="http://blog.ez2learn.com/"><span>Victor's ç¨‹å¼è¨­è¨ˆé‡ä¸Šå°æç´ å€‹äººéƒ¨è½æ ¼</span></a></li><li class="item76"><a href="javascript:if(confirm('http://walele.com/  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://walele.com/'" tppabs="http://walele.com/"><span>Waleleå‰µæ„æŠ•ç¥¨ç³»çµ±</span></a></li></ul>					</div>
				</div>
			</div>
		</div>
			<div class="module_text">
			<div>
				<div>
					<div>
													<h3>å»£å‘Š</h3>
											<div class="bannergroup_text">

	<div class="bannerheader">å»£å‘Šè´ŠåŠ©å•†</div>

	<div class="bannerfooter_text">
		 <script type="text/javascript"><!--
google_ad_client = "pub-2676784508728825";
/* 120x600, å·²å»ºç«‹ 2008/9/11 */
google_ad_slot = "8822539468";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js" tppabs="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>	</div>
</div>					</div>
				</div>
			</div>
		</div>
	
        <br />
        <div align="center"></div>
    </div>
    	<div id="maincolumn_middle" class="maincolumn_white">
    	<div class="path"><span class="breadcrumbs pathway">
<a href="javascript:if(confirm('http://ez2learn.com/  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/'" tppabs="http://ez2learn.com/" class="pathway">é¦–é </a> <img src="../../../images/M_images/arrow.png" tppabs="http://ez2learn.com/images/M_images/arrow.png" alt=""  /> <a href="javascript:if(confirm('http://ez2learn.com/index.php/python-tutorials  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/python-tutorials'" tppabs="http://ez2learn.com/index.php/python-tutorials" class="pathway">Pythonæ•™å­¸</a> <img src="../../../images/M_images/arrow.png" tppabs="http://ez2learn.com/images/M_images/arrow.png" alt=""  /> <a href="../twisted-tutorials.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials" class="pathway">Twistedæ•™å­¸</a> <img src="../../../images/M_images/arrow.png" tppabs="http://ez2learn.com/images/M_images/arrow.png" alt=""  /> Twistedçš„Callbackæ©Ÿåˆ¶ : Deferred</span>
</div>
    	<div class="nopad"><table class="contentpaneopen">
<tr>
		<td class="contentheading" width="100%">
					Twistedçš„Callbackæ©Ÿåˆ¶ : Deferred			</td>
						<td align="right" width="100%" class="buttonheading">
		<a href="189-twistedcallback--deferred-format=pdf.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials/189-twistedcallback--deferred?format=pdf" title="PDF" onclick="window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;" rel="nofollow"><img src="../../../images/M_images/pdf_button.png" tppabs="http://ez2learn.com/images/M_images/pdf_button.png" alt="PDF"  /></a>		</td>
		
				<td align="right" width="100%" class="buttonheading">
		<a href="189-twistedcallback--deferred-tmpl=component&print=1&page=.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials/189-twistedcallback--deferred?tmpl=component&print=1&page=" title="åˆ—å°" onclick="window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;" rel="nofollow"><img src="../../../images/M_images/printButton.png" tppabs="http://ez2learn.com/images/M_images/printButton.png" alt="åˆ—å°"  /></a>		</td>
		
				<td align="right" width="100%" class="buttonheading">
		<a href="javascript:if(confirm('http://ez2learn.com/index.php/component/mailto/?tmpl=component&link=aHR0cDovL2V6MmxlYXJuLmNvbS9pbmRleC5waHAvcHl0aG9uLXR1dG9yaWFscy90d2lzdGVkLXR1dG9yaWFscy8xODktdHdpc3RlZGNhbGxiYWNrLS1kZWZlcnJlZA%3D%3D  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://ez2learn.com/index.php/component/mailto/?tmpl=component&link=aHR0cDovL2V6MmxlYXJuLmNvbS9pbmRleC5waHAvcHl0aG9uLXR1dG9yaWFscy90d2lzdGVkLXR1dG9yaWFscy8xODktdHdpc3RlZGNhbGxiYWNrLS1kZWZlcnJlZA%3D%3D'" tppabs="http://ez2learn.com/index.php/component/mailto/?tmpl=component&link=aHR0cDovL2V6MmxlYXJuLmNvbS9pbmRleC5waHAvcHl0aG9uLXR1dG9yaWFscy90d2lzdGVkLXR1dG9yaWFscy8xODktdHdpc3RlZGNhbGxiYWNrLS1kZWZlcnJlZA%3D%3D" title="E-mail" onclick="window.open(this.href,'win2','width=400,height=350,menubar=yes,resizable=yes'); return false;"><img src="../../../images/M_images/emailButton.png" tppabs="http://ez2learn.com/images/M_images/emailButton.png" alt="E-mail"  /></a>		</td>
					</tr>
</table>

<table class="contentpaneopen">
<tr>
	<td valign="top">
		<span class="small">
			ä½œè€…æ˜¯ Victor		</span>
		&nbsp;&nbsp;
	</td>
</tr>

<tr>
	<td valign="top" class="createdate">
		é€±ä¸‰, 11 äºŒæœˆ 2009 21:10	</td>
</tr>


<tr>
<td valign="top">
<h2>ä»€éº¼æ˜¯Deferred</h2>

<p>
ç°¡å–®çš„ä¸€å¥è©±ä¾†èªªï¼Œå®ƒæ˜¯Twistedçš„Callbackæ©Ÿåˆ¶ï¼Œæˆ–è¨±æœƒä»¤äººè¦ºå¾—å¾ˆå¥‡æ€ªï¼ŒCallbackä¸å°±æ˜¯å‡½æ•¸ç•¶åƒæ•¸å‚³éï¼ŒåŸ·è¡Œå®Œæˆå¾Œå†å‘¼å«å¦‚æ­¤è€Œä»¥ï¼Œä½•ä»¥éœ€è¦ä¸€å€‹ç‰¹åˆ¥çš„æ©Ÿåˆ¶ï¼Œäº‹å¯¦ä¸Šé™¤æ­¤ä¹‹å¤–é‚„æœ‰æ›´å¤šäº‹æƒ…è¦è™•ç†ï¼Œè€Œå®ƒçš„Deferredå¸¶ä¾†å¾ˆå¤§çš„å¥½è™•ï¼Œæˆ‘å€‘ç›´æ¥åƒè€ƒ<a class="external-link" href="javascript:if(confirm('http://twistedmatrix.com/projects/core/documentation/howto/defer.html  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://twistedmatrix.com/projects/core/documentation/howto/defer.html'" tppabs="http://twistedmatrix.com/projects/core/documentation/howto/defer.html">
å®˜æ–¹æ–‡ä»¶</a>ï¼Œä¾†èªªæ˜ä»€éº¼æ˜¯Deferred</p>

<h2>Deferredçš„ä½¿ç”¨æ–¹å¼<br /></h2>

<p>ä»¥ä¸‹é€™å¼µåœ–èªªæ˜Deferredç‰©ä»¶æ˜¯é€™æ¨£è¢«ä½¿ç”¨çš„</p>

<p><img src="../../../images/stories/python-tutorial/third-party/twisted-tutorial/0.png" tppabs="http://ez2learn.com/images/stories/python-tutorial/third-party/twisted-tutorial/0.png" alt="" /></p>

<ol><li>é€å‡ºè³‡æ–™éœ€æ±‚</li>

<li>å›å‚³Deferredç‰©ä»¶</li>

<li>ç¶å®šCallbackåˆ°Deferredç‰©ä»¶</li>
</ol><p>é€™æ¨£æˆ–è¨±æœ‰äº›é›£æ‡‚ï¼Œæˆ‘å€‘ç”¨ä¸€å€‹å¯¦éš›ä¸€é»çš„ä¾‹å­ä¾†èªªæ˜</p>

<pre name="code" class="python:nogutter:nocontrols">
from twisted.internet import reactor
from twisted.web.client import getPage

def printPage(html):
    print html

def printError(error):
    print error

# 1. request google page
# 2. return deferred object
deferred = getPage('http://www.google.com')

# 3. add callbacks, printPage for print page content
# print error for print error message
deferred.addCallbacks(printPage, printError)

reactor.run()
</pre>

<p>é€™å€‹ç¨‹å¼æœƒä¸‹è¼‰Googleçš„é¦–é ä¸¦ä¸”å°å‡ºä¾†ï¼Œæˆ‘å€‘çš„ç¨‹å¼å…©å€‹Callbackså‡½æ•¸å°±æ˜¯åœ–å½¢ä¸­çš„Data
sinkï¼Œä¹Ÿå°±æ˜¯æœ€å¾Œè³‡æ–™çš„å»è™•ï¼Œè€ŒData sourceå°±æ˜¯getPageå‡½æ•¸ï¼Œæ‰€ä»¥å°æ‡‰çš„æ­¥é©Ÿæ˜¯</p>

<ol><li>å‘¼å«getPageå‡½æ•¸ï¼Œå®ƒæœƒé€å‡ºhttpçš„requestï¼Œä½†æ˜¯ä¸¦ä¸æœƒç«‹åˆ»å®Œæˆ</li>

<li>
å› ç‚ºgetPageä¸æœƒç«‹åˆ»å®Œæˆï¼Œæ˜¯éåŒæ­¥çš„ä»»å‹™ï¼Œæ‰€ä»¥é€™å€‹å‡½æ•¸ä¸æœƒBlockedï¼Œè€Œæ˜¯ç«‹åˆ»å›å‚³ä¸€å€‹deferredç‰©ä»¶ï¼Œæˆ‘å€‘å°±å¯ä»¥å¢åŠ callbackåˆ°deferredç‰©ä»¶</li>

<li>ç•¶ç¶²é ä¸‹è¼‰æˆåŠŸæˆ–å¤±æ•—äº†ï¼Œå®ƒå°±æœƒå‘¼å«deferredè£¡çš„callbackå‡½æ•¸</li>
</ol><h2>Â Deferredçš„é‹ä½œæ–¹å¼</h2>

<p>ä»¥ä¸‹é€™å¼µåœ–æ˜¯ç•¶éåŒæ­¥äº‹ä»¶å®Œæˆæ™‚ï¼ŒDeferredç‰©ä»¶æœƒå‘¼å«Callbackçš„æµç¨‹</p>

<img src="../../../images/stories/python-tutorial/third-party/twisted-tutorial/1.png" tppabs="http://ez2learn.com/images/stories/python-tutorial/third-party/twisted-tutorial/1.png" alt="" /><ol><li>
ç•¶çµæœ(éåŒæ­¥çš„ä»»å‹™å®Œæˆçš„è³‡æ–™ã€æˆ–ç™¼ç”ŸéŒ¯èª¤)å·²ç¶“æº–å‚™å¥½æ™‚ï¼Œå¦‚æœæˆåŠŸå‰‡å‘¼å«.callback(çµæœ)ï¼Œå¦‚æœå¤±æ•—å‰‡å‘¼å«.errback(å¤±æ•—)
(æ‰€è¬‚çš„å¤±æ•—æ˜¯ä¸€å€‹twisted.python.failure.Failureçš„å¯¦é«”ï¼Œè£¡é¢å¤¾å¸¶äº†å¤±æ•—çš„åŸå› )</li>

<li>Deferredç‰©ä»¶æœƒä»¥ä¸Šä¸€å€‹callbackæˆ–errbackçš„å›å‚³å€¼å‚³çµ¦ä¸‹ä¸€å±¤ï¼Œä¸¦ä¸”æ ¹æ“šä¸‹é¢çš„è¦è²¬åŸ·è¡Œ</li>
</ol><ul><li>callbackçš„å›å‚³å€¼éƒ½æœƒç•¶åšä¸‹ä¸€å€‹callbackçš„ç¬¬ä¸€å€‹åƒæ•¸</li>

<li>å¦‚æœcallback raiseä¸€å€‹ä¾‹å¤–ï¼Œå‰‡å‘¼å«ä¸‹ä¸€å±¤çš„errback</li>

<li>ä¸€å€‹æ²’æœ‰è¢«è™•ç†çš„å¤±æ•—æœƒå¾€ä¸‹é¢çš„errbackå‚³ï¼Œå°±åƒexcept:é‚£æ¨£ä¸€å€‹ä¸€å€‹çš„è™•ç†</li>

<li>å¦‚æœerrbackæ²’æœ‰å›å‚³å¤±æ•—æˆ–raiseä¸€å€‹ä¾‹å¤–(è¡¨ç¤ºè¢«è™•ç†æ‰äº†)ï¼Œå‰‡å‘¼å«ä¸‹ä¸€å±¤çš„callback</li>
</ul><h2>ç‚ºä»€éº¼è¦æœ‰é€™æ¨£çš„æ©Ÿåˆ¶?</h2>

<p>é€™æ¨£çš„æ©Ÿåˆ¶é›–ç„¶æ²’æœ‰å¤ªè¤‡é›œï¼Œä½†æ˜¯ä¹Ÿæ˜¯è¦èŠ±ä¸€é»å¿ƒæ€å»äº†è§£ï¼Œé‚£ç‚ºä½•è¦æœ‰é€™æ¨£çš„æ©Ÿåˆ¶?
å› ç‚ºåœ¨é€™æ¨£éåŒæ­¥çš„æƒ…æ³ä¸‹ï¼Œæ²’æœ‰åœ°æ–¹å»æ””æˆªä¾‹å¤–ï¼Œå› ç‚ºæ‰€æœ‰äº‹ä»¶çš„è™•ç†éƒ½æ˜¯reactor.run()åœ¨åšï¼Œä¾‹å¤–æœƒå¾é‚£è£¡è·‘å‡ºä¾†ï¼Œä½†æ˜¯é‚£ä¸¦ä¸æ˜¯æˆ‘å€‘æƒ³è¦çš„ï¼Œæˆ‘å€‘åªæƒ³é‡å°æŸå€‹éåŒæ­¥çš„äº‹ä»¶åšè™•ç†ï¼Œå› æ­¤æœ‰äº†é€™å¥—æ©Ÿåˆ¶æˆ‘å€‘å°±å¯ä»¥é‡å°æˆ‘å€‘æƒ³è¦çš„ä¾‹å¤–æˆ–å¤±æ•—åšè™•ç†ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒæœ¬èº«ä¹Ÿæ˜¯<a class="external-link" href="javascript:if(confirm('http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern'" tppabs="http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern">è²¬ä»»éˆ</a>çš„è¨­è¨ˆæ¨£å¼(Design
pattern)ï¼Œé€™è¡¨ç¤ºä½ å¯ä»¥å¢åŠ ä¸€ä¸²çš„å‡½æ•¸ä¾†è™•ç†è³‡æ–™ï¼Œèˆ‰å€‹ä¾‹å­</p>

<pre name="code" class="python:nogutter:nocontrols">
å–å¾—ç¶²é è³‡æ–™ -&gt; è§£æç¶²é è³‡æ–™ -&gt; è¨ˆç®—çµ±è¨ˆåˆ†æ -&gt; å„²å­˜åˆ°è³‡æ–™åº«
</pre>

<p>
ä½ å¯ä»¥æœ‰é€™æ¨£ä¸€ä¸²çš„è²¬ä»»å„è² è²¬ä¸åŒçš„äº‹æƒ…ï¼Œå®ƒå€‘éƒ½ä¸èˆ‡å‰å¾Œè¦åšçš„äº‹æƒ…ç„¡é—œï¼Œæ‰€ä»¥é‡è¦†ä½¿ç”¨æ€§å°±å¤§å¤§æå‡ï¼Œè€Œä¸”å°±ç®—å…¶ä¸­ä¸€å€‹ç’°ç¯€å‡ºéŒ¯ï¼Œå®ƒä¸¦ä¸æ˜¯ä¸Ÿå‡ºä¾‹å¤–ï¼Œè€Œæ˜¯å‘ä¸‹å‚³æ’­ï¼Œå¦‚æœä½ åœ¨æŸä¸€å±¤ä¸Šä¸æƒ³è™•ç†é‚£æ¨£çš„éŒ¯èª¤ï¼Œå°±ä¸è¦åŠ ä¸Šerrbackï¼ŒéŒ¯èª¤é‚„æ˜¯æœƒå¾€ä¸‹å‚³æ’­ï¼Œè€Œä¸”å®ƒå€‘åˆç„¡çŸ¥æ–¼ä¸Šå±¤å’Œä¸‹å±¤ï¼Œé”åˆ°é™ä½è—•åˆåº¦çš„æ•ˆæœã€‚</p>

<p>Deferredä½¿ç”¨çš„æŠ€å·§</p>

<p>Deferredåœ¨å›å‚³çš„æ™‚å€™ï¼Œå°±æ˜¯å¢åŠ callbackçš„å¥½æ™‚æ©Ÿï¼Œèˆ‰å€‹ä¾‹å­ä½ å¯ä»¥é€™æ¨£å°è£ä½ éåŒæ­¥å‡½æ•¸</p>

<pre name="code" class="python:nogutter:nocontrols">
import re

from twisted.internet import reactor
from twisted.web.client import getPage

def parsePage(html):
    result = re.match('(.*)&lt;title&gt;(.*?)&lt;/title&gt;(.*)', html, re.IGNORECASE)
    return result.groups()[1]

def getTitle(url):
    d = getPage(url)
    d.addCallback(parsePage)
    return d

def printTitle(title):
    print title

def printError(error):
    print error

# get page's title
deferred = getTitle('http://www.google.com')

deferred.addCallbacks(printTitle, printError)

reactor.run()
</pre>

<p>åœ¨é€™å€‹ä¾‹å­ä¸­æˆ‘å€‘å°è£äº†getPageï¼Œå–å¾—å®ƒå›å‚³çš„Deferredç„¶å¾Œå¢åŠ ä¸Šæˆ‘å€‘çš„parsePage
callbackï¼Œå¦‚æ­¤ä¸€ä¾†å¤–ç•Œçœ‹ä¾†é€™å€‹getTitleå°±æ˜¯å–å¾—æŸå€‹ç¶²é ç„¶å¾Œè§£ætitleçš„è¡Œç‚ºï¼Œç•¶ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é¸æ“‡ä¸å°è£æˆgetTitleï¼Œè€Œåªæ˜¯ä½¿ç”¨parsePageç•¶åšç¬¬ä¸€å€‹callbackå»è™•ç†html</p>

<pre name="code" class="python:nogutter:nocontrols">
import re

from twisted.internet import reactor
from twisted.web.client import getPage

def parsePage(html):
    result = re.match('(.*)&lt;title&gt;(.*?)&lt;/title&gt;(.*)', html, re.IGNORECASE)
    return result.groups()[1]

def printTitle(title):
    print title

def printError(error):
    print error

# get page's title
deferred = getPage('http://www.google.com')
deferred.addCallbacks(parsePage, printError)
deferred.addCallbacks(printTitle, printError)

reactor.run()
</pre>

<p>ä½ æœ‰ä½ çš„é¸æ“‡ï¼Œé€™å°±æ˜¯å®ƒçš„å½ˆæ€§</p>

<h2>Callbackçš„å›å‘¼åƒæ•¸</h2>

<p>
callbackå‡½æ•¸çš„ç¬¬ä¸€å€‹åƒæ•¸æ˜¯å›å‚³çš„è³‡æ–™ï¼Œåœ¨è®€å®Œä¸Šé¢çš„èªªæ˜ç›¸ä¿¡éƒ½å·²ç¶“å¾ˆæ¸…æ¥šï¼Œä½†æ˜¯äº‹å¯¦ä¸Šå¾ˆå¤šæ™‚å€™ï¼Œæˆ‘å€‘æœƒæœ‰å¾ˆå¤šéåŒæ­¥äº‹ä»¶åŒæ™‚é€²è¡Œï¼Œè€Œå®Œæˆæ™‚å…‰é ç¬¬ä¸€å€‹åƒæ•¸çš„è³‡æ–™ï¼Œæˆ‘å€‘ä¸¦ä¸èƒ½çŸ¥é“ç•¶åˆæˆ‘å€‘å‘¼å«é€™å‡½æ•¸çš„ç›®çš„ç‚ºä½•ï¼Œæ‰€ä»¥å¾ˆå¤šæ™‚å€™æˆ‘å€‘éƒ½æƒ³è¦åœ¨äº‹æƒ…å®Œæˆæ™‚ï¼Œé †ä¾¿é™„å¸¶ä¸€äº›ç•¶åˆé€™ä»»å‹™åŸ·è¡Œæ™‚çš„è¨Šæ¯ï¼Œé€™æ™‚å€™å°±å¯ä»¥ç”¨åˆ°å›å‘¼åƒæ•¸äº†ï¼Œä¸‹é¢é€™å€‹ä¾‹å­ç¤ºç¯„å¦‚ä½•ä½¿ç”¨å›å‘¼åƒæ•¸</p>

<pre name="code" class="python:nogutter:nocontrols">
from twisted.internet import reactor
from twisted.web.client import getPage

def printPage(html, siteName):
    print siteName, 'page length', len(html)

def printError(error):
    print error

deferred = getPage('http://www.google.com')
deferred.addCallbacks(printPage, printError, callbackArgs=('Google',))

deferred = getPage('http://yahoo.com')
deferred.addCallbacks(printPage, printError, callbackArgs=('Yahoo',))

reactor.run()
</pre>

<p>
å›å‘¼åƒæ•¸æœƒç•¶åšç¬¬äºŒå€‹åƒæ•¸å‚³çµ¦callbackï¼Œå¦‚æ­¤ä¸€ä¾†å°±å¯ä»¥å¤¾ä»£ä¸€äº›æœ‰ç”¨çš„è³‡è¨Šçµ¦å›å‘¼å‡½æ•¸å»è™•ç†ï¼Œerrbackä¸€æ¨£å¯ä»¥ä½¿ç”¨é€™æ¨£çš„åƒæ•¸ï¼Œé—œæ–¼è©³ç´°æƒ…æ³è«‹æŸ¥è©¢Twistedçš„APIåƒè€ƒæ‰‹å†Š</p>

<h2>ç‚ºä»€éº¼æˆ‘çš„éŒ¯èª¤ä¸æœƒè¢«å°å‡ºä¾†?</h2>

<p>
æœ‰å€‹å¾ˆå¸¸è¦‹çš„å•é¡Œå°±æ˜¯ï¼Œå¦‚æœä½ çš„æŸå€‹callbackå‡½æ•¸ä¸Ÿå‡ºæŸå€‹ä¾‹å¤–ï¼Œå¯æ˜¯ä½ å»ç™¼ç¾éŒ¯èª¤è¨Šæ¯æ²’æœ‰è¢«è£œæ‰ä¸¦ä¸”å°å‡ºä¾†ï¼Œä»¥ä¸‹ä¾‹å­ç¤ºç¯„é€™æ¨£çš„æƒ…æ³</p>

<pre name="code" class="python:nogutter:nocontrols">
from twisted.internet import reactor
from twisted.web.client import getPage

def printPage(html):
    # raise a exception
    a = 10 / 0
    print html

def printError(error):
    print error
    
deferred = getPage('http://www.google.com')
deferred.addCallbacks(printPage, printError)

reactor.run()
</pre>

<p>
ä½ æœƒç™¼ç¾ä½ ä¸€ç›´ç­‰ï¼Œä½†æ˜¯å°±æ˜¯ä¸è¦‹éŒ¯èª¤è¨Šæ¯å‡ºç¾ï¼Œæˆ–æ˜¯çµæœå°å‡ºï¼ŒåŸå› å‡ºåœ¨æ–¼ï¼Œæœªè¢«è£œæ‰çš„éŒ¯èª¤ï¼Œæœƒåœ¨deferredç‰©ä»¶è¢«æ‘§æ¯€æ™‚æ‰æœƒå°å‡ºï¼Œæ‰€ä»¥ä½ çœ‹ä¸åˆ°å®ƒè¢«å°å‡ºä¾†ï¼Œè§£æ±ºçš„æ–¹æ³•å°±æ˜¯ï¼Œåœ¨ä¸‹é¢å†åŠ ä¸€å±¤çš„errbackï¼Œå¦‚æ­¤ä¸€ä¾†å°±èƒ½è£œæ‰åˆ°ä¸Šä¸€å±¤çš„éŒ¯èª¤ï¼Œä¸ç”¨ç­‰åˆ°deferredè¢«æ‘§æ¯€</p>

<pre name="code" class="python:nogutter:nocontrols">
from twisted.internet import reactor
from twisted.web.client import getPage

def printPage(html):
    # raise a exception
    a = 10 / 0
    print html

def printError(error):
    print error
    
deferred = getPage('http://www.google.com')
deferred.addCallbacks(printPage, printError)
deferred.addErrback(printError)

reactor.run()
</pre>

<h2>ç¢ºä¿callbackéƒ½æœ‰å›å‚³è³‡æ–™</h2>

<p>
ä»¥ä¸Šç¯„ä¾‹éƒ½å› ç‚ºç›®çš„åªç‚ºå°å‡ºè³‡æ–™ç¨‹å¼ä¾¿çµæŸäº†ï¼Œå¦‚æœèªªä½ çš„ç¨‹å¼æƒ³è¦è¢«é‡è¦†ä½¿ç”¨ï¼Œå¯ä»¥å’Œå…¶å®ƒcallbackä¸²åœ¨ä¸€èµ·ï¼Œæœ€å¥½åœ¨æ¯å€‹callbackå¾Œé¢éƒ½å›å‚³è³‡æ–™ï¼Œå¦å‰‡Pythoné è¨­æ²’å›å‚³çš„å›å‚³å€¼ç‚ºNoneï¼Œä¸‹é¢çš„callbackå°±ä¸èƒ½è™•ç†ä¸Šé¢çš„è³‡æ–™ï¼Œä»¥ä¸‹ç¯„ä¾‹ç¤ºç¯„æ­£ç¢ºçš„åšæ³•</p>

<pre name="code" class="python:nogutter:nocontrols">
from twisted.internet import reactor
from twisted.web.client import getPage

def printPage(html):
    print html
    # we pass it to chain, so other callback can handle it
    return html

def printError(error):
    print error
    # pass it
    return error
    
deferred = getPage('http://www.google.com')
deferred.addCallbacks(printPage, printError)

reactor.run()
</pre>

<strong><span class="visualHighlight">è«‹æ³¨æ„ï¼Œå¦‚æœerrbackæ²’æœ‰å›å‚³å€¼çš„è©±ï¼Œä¾ç…§Deferredçš„è¦å‰‡ï¼Œå›å‚³å€¼ä¸æ˜¯å¤±æ•—æˆ–æ˜¯æ²’æœ‰ä¸Ÿå‡ºä¾‹å¤–çš„è©±ï¼Œæœƒè½‰åˆ°callbackç¹¼çºŒåŸ·è¡Œ</span></strong>


<p>Â </p>
			<table align="center" class="pagenav">
			<tr>
				<th class="pagenav_prev">
					<a href="188-twisted--reactor.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials/188-twisted--reactor">&lt; å‰ä¸€å€‹</a>
				</th>
				<td width="50">
					&nbsp;
				</td>
				<th class="pagenav_next">
					<a href="190-deferred--retry.htm" tppabs="http://ez2learn.com/index.php/python-tutorials/twisted-tutorials/190-deferred--retry">ä¸‹ä¸€å€‹ &gt;</a>
				</th>
			</tr>
			</table></td>
</tr>

</table>
<span class="article_separator">&nbsp;</span>
</div>
    </div>
	<div id="rightcolumn">
        </div>

		
    <br clear="all" />


<p id="power_by" align="center">
	æ ¸å¿ƒæ˜¯ <a href="javascript:if(confirm('http://www.joomla.org/  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://www.joomla.org/'" tppabs="http://www.joomla.org/">Joomla!</a>.
    Designed by: <a href="javascript:if(confirm('http://www.themza.com/joomla1.5/computer-society-template.html  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://www.themza.com/joomla1.5/computer-society-template.html'" tppabs="http://www.themza.com/joomla1.5/computer-society-template.html" target="_blank" title="Computer Society template">Free Joomla Theme</a>, <a href="javascript:if(confirm('http://www.ntchosting.com/domains/whois-id-protection.html  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://www.ntchosting.com/domains/whois-id-protection.html'" tppabs="http://www.ntchosting.com/domains/whois-id-protection.html" target="_blank" title="protect the whois information of your domains">whois protect</a>.&nbsp;Valid <a href="javascript:if(confirm('http://validator.w3.org/check/referer  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://validator.w3.org/check/referer'" tppabs="http://validator.w3.org/check/referer">XHTML</a> and <a href="javascript:if(confirm('http://jigsaw.w3.org/css-validator/check/referer  \n\n¸ÓÀÉ®×¥¼³Q Teleport Pro ¤U¸ü¡A¦]¬° ¥¦¦ì©ó¶}©l¦ì§}¥H³]©wªºÃä¬É¥H¥~ªº°ì©Î¸ô®|¤¤¡C  \n\n§A·Q­n±q¦øªA¾¹¶}±Ò¥¦¶Ü?'))window.location='http://jigsaw.w3.org/css-validator/check/referer'" tppabs="http://jigsaw.w3.org/css-validator/check/referer">CSS</a>.
</p>



</div>

<!-- Google Analysis begin -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www./");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-390311-6");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- Google Analysis end -->

</body>
</html>